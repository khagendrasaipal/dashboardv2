
<!doctype html>
<html>
    <head>
        <meta charset="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="profile" href="https://gmpg.org/xfn/11">
		<title>DASHBOARD</title>
        <!-- Google Fonts CDN -->
        <!-- Google Fonts
        ============================================ -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Khand:wght@500;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Mukta:300,400,500,600,700,800,900" rel="stylesheet" />        
        
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
        <script src="https://use.fontawesome.com/93c3e6ff0e.js"></script>

        <!-- Bootstrap 4.6.1 CDN -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">  

        <!-- STYLESHEETS : begin -->
        <link rel="stylesheet" type="text/css" href="css/style1.css">
        <script type="text/javascript" href="js/hmis.js"></script>
        <script src="http://dashboard.hmis.gov.np/js/jquery-2.2.3.min.js"></script> 
  <script src="http://dashboard.hmis.gov.np/js/jquery.min.js"></script>
  <script src="http://dashboard.hmis.gov.np/js/jquery-ui.min.js"></script>
<script src="http://dashboard.hmis.gov.np/js/bootstrap.min.js"></script> 
         <style type="text/css">
  .thiscard{
    max-height: 800px;
    overflow: auto;
  }
  
  .highcharts-title{
  	fill: #0062cc !important;
  }
  
  .highcharts-subtitle{
  	fill: #d53e4c !important;
  }
  .highcharts-legend-item{
  	fill: #6a34cd !important;
  }
</style>   
<script>

setInterval(() => {
   const nepalTimezone = 'Asia/Kathmandu';

// Create a new Date object and set the timezone
const now = new Date();
const options = { timeZone: nepalTimezone };

// Format the time using the Intl.DateTimeFormat API
const formatter = new Intl.DateTimeFormat('ne-NP', {
  hour: 'numeric',
  minute: 'numeric',
  second: 'numeric',
  timeZone: nepalTimezone,
});

// Get the formatted time string
const timeString = formatter.format(now);
   var t=convertToNepali(timeString);
    document.getElementById('time').innerHTML = t;
  }, 1000);
	function convertToNepali(engNum){
		var nepNum = ["०", "१", "२", "३", "४", "५", "६", "७", "८", "९"];
		var tnum = "";
		var engNums = engNum.split("");
		for(const i of engNums){
			if(nepNum[i] !== undefined){
				tnum +=nepNum[i];
			}else{
				tnum +=i;
			}
		}
		return tnum;
	}
</script>   
    </head>



    <body>
        <div class="hmis-section">
            <div class="container-fluid">
                <div class="row">

                    <div class="col-lg-2 col-sm-6 col-xs-12">
                        <div class="head-block1">
                            <div class="icon">
                                <img src="https://openweathermap.org/img/w/{{icon}}.png">
                            </div>
                            <div class="info">
                                <span class="spc1">  {{temp}} &deg;C  </span> 
                                <span class="spc2" style="font-family: Helvetica Neue, Helvetica, Arial, sans-serif !important">  {{dates}} </span>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-2 col-sm-6 col-xs-12">
                        <div class="head-block1">            
                            <div class="icon">
                                <i class="fas fa-restroom"></i>
                            </div>
                            <div class="info">
                                <span class="spc1"> {{population}}</span>
                                <span class="spc2">जनसंख्या</span>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 col-sm-6 col-xs-12">
                        <div class="company-info">
                            <img class="img-fluid" src="../Emblem_of_Nepal_2020.svg">
                            <h3>{{orgname}} </h3>
                            <h5>{{pname}},नेपाल</h5>
                        </div>
                    </div>

                    <div class="col-lg-2 col-sm-6 col-xs-12">
                        <div class="head-block1">
                            <div class="icon">
                                <i class="fa fa-hospital"></i>
                            </div>
                            <div class="info">
                                <span class="spc1"> {{hf}}</span>
                                <span class="spc2"> स्वास्थ्य संस्था </span>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-2 col-sm-6 col-xs-12">
                        <div class="head-block1">
                            <div class="icon">
                                <i class="fa fa-building"></i>
                            </div>
                            <div class="info">
                                <span class="spc1">  {{household}} </span>
                                <span class="spc2">घरधुरी </span>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div><!-- Ends hmis-section -->



        <!-- Scroll Part Start -->
        <div class="marquee-section">
            <div class="container-fluid">
                <div class="row">
                    <div class="time-display col-md-2">
                        <h4 id="time" style="font-family: Helvetica Neue, Helvetica, Arial, sans-serif !important;font-weight:100 !important"></h4>
                    </div>
                    <div class="marquee-display col-md-10">
                        <div class="marquee">
                            <p>{{update | raw }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Ends marquee-section -->



        <!-- Swiper -->
        <div class="slider-section">
            <figure class="highcharts-figure">
                <div id="slideshow" class="text-center">
                  
                    <div class="slider-item card-body" data-duration="10000">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th scope="col">वडा</th>
                                    <th scope="col">कुल स्वास्थ्य संस्था</th>
                                    <th scope="col">सरकारी  स्वास्थ्य संस्था</th>
                                    <th scope="col">गैरसरकारी स्वास्थ्य संस्था </th>
                                    <th scope="col">नर्मल बेड </th>
                                    <th scope="col">आइ सि यु बेड </th>
                                    <th scope="col">भेन्टिलेटर बेड </th>
                                </tr>
                            </thead>

                            <tbody>  
                               {% for hf in hfcount %}
             
                 <tr>
                      
                      <td>{{ hf.get("ward")}}</td>				
                      <td>{{ hf.get("total")}}</td>
                      <td>{{ hf.get("gov")}} </td>
                      <td>{{ hf.get("ngov")}}</td>
                      <td>{{ hf.get("normal")}}  </td>
                      <td>{{ hf.get("icu")}}  </td>
                      <td>{{ hf.get("vent")}} </td>
                   
                      
              </tr> 
              {% endfor %} 
                   
                            </tbody>
                        </table>
                    </div> 
                    
                    {% if video != "1" %}
						<div  class="col-md-12 slider-item embed-responsive embed-responsive-16by9">
         
          <script>
          	function fullScreenVideo(){
				var mv = document.getElementById("myvideo");
				if (mv.requestFullscreen) {
			    mv.requestFullscreen();
			  } else if (mv.webkitRequestFullscreen) { /* Safari */
			    mv.webkitRequestFullscreen();
			  } else if (mv.msRequestFullscreen) { /* IE11 */
			    mv.msRequestFullscreen();
			  }
			  $('#watchButton').click();
			}
          </script>
         
            	<video id="myvideo" class="embed-responsive-item"  autoplay="autoplay" controls muted onload="fullScreenVideo()">
				  <source src="{{baseUrl}}/{{video}}" type="video/mp4">
				  <source src="{{baseUrl}}/{{video}}" type="video/ogg">
				
				</video>
           
         
       </div>
					{% endif %}
                    
                     {% for i in image %}
       <div class="col-md-12 slider-item" data-duration="{{i.get("time")*1000}}">
         
            <img class="img-fluid"  src="{{baseUrl}}/{{i.get("image")}}">
        
       </div>
         
            {% endfor %}

                
                
                  {% for p in fchart %}
     
              <div class="col-md-12 col-xs-12 slider-item" id="cc{{ p.get("id")}}" data-duration="15000"> </div>
              
              
              {% endfor %}
                     
             {% for p in dchart %}
             
              <div class="col-md-12 col-xs-12 slider-item" id="cc{{ p.get("id")}}" data-duration="{{p.get("time")*1000}}"> </div>
              
              
              {% endfor %}
               
                
            {% for p in chart %}
           
            <div class="col-md-12 col-xs-12 slider-item" id="{{ p.get("indicator")}}" data-duration="{{p.get("time")*1000}}"> </div>
            
            
            {% endfor %}
            
            
            
           		<div class="col-md-12 col-xs-12 slider-item" id="cont" data-duration="10000"> </div>
                <div class="col-md-12 col-xs-12 slider-item" id="dash1" data-duration="10000"> </div>
                <div class="col-md-12 col-xs-12 slider-item" id="dash2" data-duration="10000"> </div>
                <div class="col-md-12 col-xs-12 slider-item" id="dash3" data-duration="10000"> </div>
                
       </div>                        
            </figure> 
                   
        </div>  <!-- Ends slider-section -->  
          

        <script src="https://code.highcharts.com/highcharts.js"></script>
        <script src="https://code.highcharts.com/highcharts-3d.js"></script>
        <script src="https://code.highcharts.com/modules/exporting.js"></script>
        <script src="https://code.highcharts.com/modules/export-data.js"></script>
        <script src="https://code.highcharts.com/modules/accessibility.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
        
        <script type="text/javascript">
        
     

    
  Highcharts.setOptions({
    colors: ['#058DC7', '#50B432', '#ED561B', '#DDDF00', '#24CBE5', '#64E572', '#FF9655', '#FFF263', '#6AF9C4']
});
  
    
   
  
    var count = 1
  $(".slider-item").hide();
  
let slideIndex = 0;
let slides = document.getElementsByClassName("slider-item");
showSlides();
function showSlides() {
  let i;
  if(slideIndex!=0){
  	var last = slideIndex-1;
  	$(slides[last]).hide();
  }
  slideIndex++;
  if (slideIndex > slides.length) {slideIndex = 1};
  var dur = $(slides[slideIndex-1]).data("duration");
  if(slides[slideIndex-1].querySelector("video")!=null){
  	dur = slides[slideIndex-1].querySelector("video").duration*1000;
  	slides[slideIndex-1].querySelector("video").play();
  }
  $(slides[slideIndex-1]).show();
  setTimeout(showSlides, dur); // Change image every 2 seconds
} 
  
setInterval(()=>{
	openFullscreen();
}, 2000);
  
var video = document.getElementById('myvideo');





function openFullscreen() {
$('#watchButton').trigger('click', [true]);
var mf = document.getElementById("myvideo");
            mf.webkitRequestFullscreen();
            mf.style.display="";
  if (elem.requestFullscreen) {
    elem.requestFullscreen();
  } else if (elem.webkitRequestFullscreen) { /* Safari */
    elem.webkitRequestFullscreen();
  } else if (elem.msRequestFullscreen) { /* IE11 */
    elem.msRequestFullscreen();
  }
 $('#watchButton').trigger('click', [true]);
}


  
  </script>
  
   <script type="text/javascript">
    
    // chart dummy datas
  
    
  
  
    var baseUrl="http://dashboard.hmis.gov.np";
    // var baseUrl="http://localhost:8083"
    // var months=["Shrawn","Bhadra","Ashoj","Kartik","Mangsir","Poush","Magh","Falgun","Chaitra","Baishakh","Jestha","Ashar"];
    var months=["श्रावण ","भदौ","असोज ","कार्तिक","मंसिर ","पौष","माघ","फाल्गुण","चैत्र","वैशाख","ज्येष्ठ ","असार"];
    
    
      $.ajax({
  
          method: 'get',
         url: baseUrl+"/dashboard/getConfig?orgid="+{{orgid}}+"&cid=1&dt=1",
          success: function(response) {
             var a=response.data;
              for(var i in a){
              var m = [];
              var y = [];
              var d=[];
              
                   var f={"mindicator":[],"myear":[]};
      var inds = a[i].mindicator.split(",");
        for(var k of inds){
        m.push(k);
          f.mindicator.push(k);
        }
        var yrs = a[i].myear.split(",");
        for(var j of yrs){
           y.push(parseInt(j));
          f.myear.push(parseInt(j));
        }
         d.push({
              mindicator: m, 
              myear:  y
          });
       var tabid="cc"+a[i].id;
        var ctype=a[i].charttype;
        getCharts(tabid,ctype,inds,yrs,d[0],"f");
       
                  
              }
      
  
          },
          fail: function() {
              alert("failed");
          }
      });
      
       $.ajax({
  
          method: 'get',
         url: baseUrl+"/dashboard/getConfig?orgid="+{{orgid}}+"&cid=0&dt=1",
          success: function(response) {
             var a=response.data;
              for(var i in a){
              var m = [];
              var y = [];
              var d=[];
              
                   var f={"mindicator":[],"myear":[]};
      var inds = a[i].mindicator.split(",");
        for(var k of inds){
        m.push(k);
          f.mindicator.push(k);
        }
        var yrs = a[i].myear.split(",");
        for(var j of yrs){
           y.push(parseInt(j));
          f.myear.push(parseInt(j));
        }
         d.push({
              mindicator: m, 
              myear:  y
          });
       var tabid="cc"+a[i].id;
        var ctype=a[i].charttype;
        getChartsHmis(tabid,ctype,inds,yrs,d[0],"h");
       
                  
              }
      
  
          },
          fail: function() {
              alert("failed");
          }
      });
      
     function getCharts(tabid,ctype,inds,yrs,dat,type){
       $.ajax({
        
                  method: "POST",
                  url: baseUrl+"/dashboard/get-ind-data?orgid="+{{orgid}}+"&fcharttype="+ctype+"&type="+type+"&findicator="+inds+"&fyear="+yrs,
                  data: dat,
                  success: function (resp) {
                  if(typeof resp.data=="string"){
                       console.log(resp.data);
                         $("#"+tabid).html(resp.data);
                         
                     }else{
                      console.log(resp.data);
                      
           Highcharts.chart(tabid, {
  
      chart: {
            type: ctype
        },
        title: resp.data[0].title,
        subtitle: resp.data[0].subtitle,
        xAxis: {
            categories: resp.data[0].cats,
            crosshair: true
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Nrs.'
            }
        },
        tooltip: {
            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
            footerFormat: '</table>',
            shared: true,
            useHTML: true
        },
       plotOptions: {
          
            column: {
                pointPadding: 0.2,
                borderWidth: 0,
                dataLabels: {
                  enabled: true
                },
            }
        },
      series: resp.data[0].series
  });
                     
                     }
                      
  
                  },
                  fail: function () {
  
                      alert("failed");
                  }
              });
          
      }
      
      function getChartsHmis(tabid,ctype,inds,yrs,dat,type){
       $.ajax({
        
                  method: "POST",
                  url: baseUrl+"/dashboard/get-ind-data?orgid="+{{orgid}}+"&charttype="+ctype+"&type="+type+"&mindicator="+inds+"&myear="+yrs,
                  data: dat,
                  success: function (resp) {
                  if(typeof resp.data=="string"){
                       console.log(resp.data);
                         $("#"+tabid).html(resp.data);
                         
                     }else{
                      console.log(resp.data);
                      
           Highcharts.chart(tabid, {
  
      chart: {
            type: ctype
        },
        title: resp.data[0].title,
        subtitle: resp.data[0].subtitle,
        xAxis: {
            categories: resp.data[0].cats,
            crosshair: true
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Value'
            }
        },
        tooltip: {
            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
            footerFormat: '</table>',
            shared: true,
            useHTML: true
        },
       plotOptions: {
          
            column: {
                pointPadding: 0.2,
                borderWidth: 0,
                dataLabels: {
                  enabled: true
                },
            }
        },
      series: resp.data[0].series
  });
                     
                     }
                      
  
                  },
                  fail: function () {
  
                      alert("failed");
                  }
              });
          
      }
    
    $.ajax({
  
          method: 'get',
         url: baseUrl+"/getDashboardSutra?orgid="+{{orgid}}+"&pid=100&repType=broad-sector&fy=2078",
          success: function(response) {
          if(response==""){
        		$("#s1").remove();
           
        	}
            var a=JSON.parse(response);
           // console.log(a);
              var tbudget = 0;
              var texp = 0;
              var labels = [];
              var series = [{
                      name: "Budget",
                      data: []
                  }, {
                      name: "Expenditure",
                      data: []
                  }];
                 // console.log(response);
                  
                  for (var i in a) {
                          labels.push(a[i].namenp);
                          series[0].data.push(a[i].totalbudget);
                          series[1].data.push(a[i].expenditure);
                          tbudget += a[i].totalbudget;
                          texp += a[i].expenditure;
                      }
                 //     console.log(series);
      var htm='<div class="col-md-12 col-xs-12" id="s1"> </div>';
      Highcharts.chart('s1', {
  
      chart: {
            type: 'column'
        },
        title: {
            text: ' Broad Sector Budget and Expenditure'
        },
        subtitle: {
            text: 'Source: Sutra'
        },
        xAxis: {
            categories: labels,
            crosshair: true
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Nrs.'
            }
        },
        tooltip: {
            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
            footerFormat: '</table>',
            shared: true,
            useHTML: true
        },
       plotOptions: {
          
            column: {
                pointPadding: 0.2,
                borderWidth: 0,
                dataLabels: {
                  enabled: true
                },
            }
        },
      series: [{
            type:'column',
            name: series[0].name,
            data: series[0].data.slice(1).map(Number)
    
        }, {
            type:'column',
            name: series[1].name,
            data: series[1].data.slice(1).map(Number)
    
        }]
  });
  $(".highcharts-credits").html("Source: HMIS");
          },
          fail: function() {
              alert("failed");
          }
      });
      
      $.ajax({
  
          method: 'get',
         url: baseUrl+"/getDashboardSutra?orgid="+{{orgid}}+"&pid=101&repType=sector&fy=2078",
          success: function(response) {
           if(response==""){
        		$("#s2").remove();
           
        	}
            var a=JSON.parse(response);
           // console.log(a);
              var tbudget = 0;
              var texp = 0;
              var labels = [];
              var series = [{
                      name: "Budget",
                      data: []
                  }, {
                      name: "Expenditure",
                      data: []
                  }];
              //    console.log(response);
                  
                  for (var i in a) {
                          labels.push(a[i].namenp);
                          series[0].data.push(a[i].totalbudget);
                          series[1].data.push(a[i].expenditure);
                          tbudget += a[i].totalbudget;
                          texp += a[i].expenditure;
                      }
                    //  console.log(series);
      
      Highcharts.chart('s2', {
  
      chart: {
            type: 'column'
        },
        title: {
            text: 'Sectorial Budget & Expenditures'
        },
        subtitle: {
            text: 'Source: Sutra'
        },
        xAxis: {
            categories: labels,
            crosshair: true
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Nrs.'
            }
        },
        tooltip: {
            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
            footerFormat: '</table>',
            shared: true,
            useHTML: true
        },
        plotOptions: {
          
            column: {
                pointPadding: 0.2,
                borderWidth: 0,
                dataLabels: {
                  enabled: true
                },
            }
        },
  
      series: [{
            type:'column',
            name: series[0].name,
            data: series[0].data.slice(1).map(Number)
    
        }, {
            type:'column',
            name: series[1].name,
            data: series[1].data.slice(1).map(Number)
    
        }]
  });
  $(".highcharts-credits").html("Source: HMIS");
          },
          fail: function() {
              alert("failed");
          }
      });
     
     
     $.ajax({
  
          method: 'get',
         url: baseUrl+"/getDashboardSutra?orgid="+{{orgid}}+"&pid=102&repType=sectorial-activity&fy=2078",
          success: function(response) {
           if(response==""){
        		$("#s3").remove();
           
        	}
            var a=JSON.parse(response);
           // console.log(a);
              var tbudget = 0;
              var texp = 0;
              var labels = [];
              var series = [{
                      name: "Budget",
                      data: []
                  }, {
                      name: "Expenditure",
                      data: []
                  }];
                 // console.log(response);
                  
                  for (var i in a) {
                          labels.push(a[i].namenp);
                          series[0].data.push(a[i].totalbudget);
                          series[1].data.push(a[i].expenditure);
                          tbudget += a[i].totalbudget;
                          texp += a[i].expenditure;
                      }
                 //     console.log(series);
      
      Highcharts.chart('s3', {
  
      chart: {
            type: 'column'
        },
        title: {
            text: 'Sectorial Activity Budget & Expenditures'
        },
        subtitle: {
            text: 'Source: Sutra'
        },
        xAxis: {
            categories: labels,
            crosshair: true
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Nrs.'
            }
        },
        tooltip: {
            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
            footerFormat: '</table>',
            shared: true,
            useHTML: true
        },
        plotOptions: {
          
            column: {
                pointPadding: 0.2,
                borderWidth: 0,
                dataLabels: {
                  enabled: true
                },
            }
        },
      series: [{
            type:'column',
            name: series[0].name,
            data: series[0].data.slice(1).map(Number)
    
        }, {
            type:'column',
            name: series[1].name,
            data: series[1].data.slice(1).map(Number)
    
        }]
  });
  $(".highcharts-credits").html("Source: HMIS");
          },
          fail: function() {
              alert("failed");
          }
      });
     
    
     $.ajax({
  
          method: 'get',
         url: baseUrl+"/getDashboardCombine?orgid="+{{orgid}},
          success: function(response) {
             var a=response.data;
      var f=a[0];
      var m=a[1];
      
      Highcharts.chart('cont', {
  
      chart: {
          type: 'column'
      },
  
      title: {
          text: 'कुल नयाँ ओपीडी भ्रमण'+" "+ f.fys
      },
  
      xAxis: {
          categories: months
      },
  
      yAxis: {
          allowDecimals: false,
          min: 0,
          title: {
              text: 'Number of visit'
          }
      },
  
      legend: {
                align: 'right',
                x: -30,
                verticalAlign: 'top',
                y: 25,
                floating: true,
                backgroundColor: 'white',
                borderColor: '#CCC',
                borderWidth: 1,
                shadow: false
            },
            tooltip: {
                headerFormat: '<b>{point.x}</b><br/>',
                pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'
            },
            plotOptions: {
                column: {
                    stacking: 'normal',
                    dataLabels: {
                        enabled: true
                    }
                }
            },
  
      series: [{
          name: f.inamenp,
          data: f.data.map(Number),
          stack: 'male'
      }, {
          name: m.inamenp,
          data: m.data.map(Number),
          stack: 'male'
      }]
  });
  $(".highcharts-credits").html("Source: HMIS");
          },
          fail: function() {
              alert("failed");
          }
      });
      
     
     
       $.ajax({
  
          method: 'get',
         url: baseUrl+"/getDashboardCombinePublic?orgid="+{{orgid}}+"&pid=1&tid=1",
          success: function(response) {
             var a=response.data;
              if(a.length==0){
           		$("#dash1").remove();
           }
      var f=a[0];
      var m=a[1];
      
      Highcharts.chart('dash1', {
  
      chart: {
          type: 'column'
      },
  
      title: {
          text: 'सुरक्षित मातृत्व कार्यक्रम - प्रसुति सेवा '+" "+ f.fys
      },
  
      xAxis: {
          categories: months
      },
  
      yAxis: {
          allowDecimals: false,
          min: 0,
          title: {
              text: 'Total number'
          }
      },
  
      legend: {
                align: 'right',
                x: -30,
                verticalAlign: 'top',
                y: 25,
                floating: true,
                backgroundColor: 'white',
                borderColor: '#CCC',
                borderWidth: 1,
                shadow: false
            },
            tooltip: {
                headerFormat: '<b>{point.x}</b><br/>',
                pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'
            },
            plotOptions: {
                column: {
                    stacking: 'normal',
                    dataLabels: {
                        enabled: true
                    }
                }
            },
  
      series: [{
          name: f.inamenp,
          data: f.data.map(Number),
          stack: 'male'
      }, {
          name: m.inamenp,
          data: m.data.map(Number),
          stack: 'male'
      }]
  });
  $(".highcharts-credits").html("Source: HMIS");
          },
          fail: function() {
              alert("failed");
          }
      });
      
      
      
      $.ajax({
  
          method: 'get',
         url: baseUrl+"/getDashboardCombinePublic?orgid="+{{orgid}}+"&pid=1&tid=0",
          success: function(response) {
             var a=response.data;
              if(a.length==0){
           		$("#dash2").remove();
           }
      var f=a[0];
      var m=a[1];
      var s=a[2];
      
      Highcharts.chart('dash2', {
  
      chart: {
          type: 'column'
      },
  
      title: {
          text: 'सुरक्षित मातृत्व कार्यक्रम '+" "+ f.fys
      },
  
      xAxis: {
          categories: months
      },
  
      yAxis: {
          allowDecimals: false,
          min: 0,
          title: {
              text: 'Total number'
          }
      },
  
      legend: {
                align: 'right',
                x: -30,
                verticalAlign: 'top',
                y: 25,
                floating: true,
                backgroundColor: 'white',
                borderColor: '#CCC',
                borderWidth: 1,
                shadow: false
            },
            tooltip: {
                headerFormat: '<b>{point.x}</b><br/>',
                pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'
            },
            plotOptions: {
                column: {
                    stacking: 'normal',
                    dataLabels: {
                        enabled: true
                    }
                }
            },
  
      series: [{
          name: f.inamenp,
          data: f.data.map(Number),
          stack: 'male'
      }, {
          name: m.inamenp,
          data: m.data.map(Number),
          stack: 'male'
      },{
          name: s.inamenp,
          data: s.data.map(Number),
          stack: 'male'
      }]
  });
  $(".highcharts-credits").html("Source: HMIS");
          },
          fail: function() {
              alert("failed");
          }
      });
  
      $.ajax({
  
          method: 'get',
         url: baseUrl+"/getDashboardCombinePublic?orgid="+{{orgid}}+"&pid=3&tid=0",
          success: function(response) {
             var a=response.data;
              if(a.length==0){
           		$("#dash3").remove();
           }
      var f=a[0];
      var m=a[1];
      var s=a[2];
      
      Highcharts.chart('dash3', {
  
      chart: {
          type: 'column'
      },
  
      title: {
          text: 'पोषण कार्यक्रम '+" "+ f.fys
      },
  
      xAxis: {
          categories: months
      },
  
      yAxis: {
          allowDecimals: false,
          min: 0,
          title: {
              text: 'Total number'
          }
      },
  
      legend: {
                align: 'right',
                x: -30,
                verticalAlign: 'top',
                y: 25,
                floating: true,
                backgroundColor: 'white',
                borderColor: '#CCC',
                borderWidth: 1,
                shadow: false
            },
            tooltip: {
                headerFormat: '<b>{point.x}</b><br/>',
                pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'
            },
            plotOptions: {
                column: {
                    stacking: 'normal',
                    dataLabels: {
                        enabled: true
                    }
                }
            },
  
      series: [{
          name: f.inamenp,
          data: f.data.map(Number),
          stack: 'male'
      }, {
          name: m.inamenp,
          data: m.data.map(Number),
          stack: 'male'
      },{
          name: s.inamenp,
          data: s.data.map(Number),
          stack: 'male'
      }]
  });
  $(".highcharts-credits").html("Source: HMIS");
          },
          fail: function() {
              alert("failed");
          }
      });
      
   
      
    
    
    
     $.ajax({
  
          method: 'get',
          url: baseUrl+"/getDashboard?orgid="+{{orgid}},
          success: function(response) {
           var a=response.data;
           var htm="";
          for(var i in a){
           htm+="<div id='"+a[i].indicator+"'></div>";
          
          // $("#slideshow").html(htm);
              console.log(a[i].fys);
              if(a[i].chart_type=="Line Chart"){
              
              Highcharts.chart(a[i].indicator, {
      chart: {
          type: 'line',
          height: '500px'
         
      },
      title: {
          text: a[i].inamenp
      },
      subtitle: {
          text: a[i].inameen
      },
      xAxis: {
          categories: months,
          crosshair: true
      },
      yAxis: {
          title: {
              text: 'Value'
          }
      },
      plotOptions: {
          line: {
              dataLabels: {
                  enabled: true
              },
              enableMouseTracking: false
          }
      },
      series: [{
          name:a[i].inamenp +" "+ a[i].fys,
          data: a[i].data.map(Number)
      }]
  });
              }
              
              if(a[i].chart_type=="Pie Chart"){
              var ind=a[i].indicator;
              var nam=a[i].inamenp;
              var series = [{
                      name: "Total",
                      data: []
                  }];
              var piedata=a[i].data.map(Number);
              for(var p in piedata){
                  var pies = {name:months[p],y:piedata[p]};
                  
                  series[0].data.push(pies);
              }
              
              Highcharts.chart(ind, {
      chart: {
         type: 'pie',
          options3d: {
              enabled: true,
              alpha: 45,
              beta: 0
          }
      },
      title: {
          text: nam
      },
      subtitle: {
          text: a[i].inameen+"("+a[i].fys+")"
      },
      tooltip: {
          pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
      },
      accessibility: {
          point: {
              valueSuffix: '%'
          }
      },
      plotOptions: {
          pie: {
              allowPointSelect: true,
              cursor: 'pointer',
               depth: 35,
              dataLabels: {
                  enabled: true,
                  format: '<b>{point.name}</b>: {point.percentage:.1f} %'
              }
          }
      },
      series: series
  });
              
              }
              
              
              if(a[i].chart_type=="Bar Chart"){
              
              Highcharts.chart(a[i].indicator, {
      chart: {
          type: 'column',
          height: '500px',
          options3d: {
              enabled: true,
              alpha: 0,
              beta: 0,
              depth: 70
          }
          
      },
      title: {
          text: a[i].inamenp
      },
      subtitle: {
          text: a[i].inameen
      },
      xAxis: {
          categories: months,
          crosshair: true,
          labels: {
              skew3d: true,
              style: {
                  fontSize: '16px'
              }
          }
      },
      yAxis: {
          min: 0,
          title: {
              text: 'Value'
          }
      },
      tooltip: {
          headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
          pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
              '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
          footerFormat: '</table>',
          shared: true,
          useHTML: true
      },
     plotOptions: {
                                      line: {
                                        dataLabels: {
                                          enabled: true
                                        },
                                        enableMouseTracking: true
                                      },
                                      column: {
                                       depth: 50,
                                        dataLabels: {
                                          enabled: true
                                        },
                                        enableMouseTracking: true
                                      },
                                      bar: {
                                        dataLabels: {
                                          enabled: true
                                        },
                                        enableMouseTracking: true
                                      },
                                      areaspline: {
                                        dataLabels: {
                                          enabled: true
                                        },
                                        enableMouseTracking: true
                                      }
  
                                    },
      series: [{
          name: a[i].inamenp +" "+ a[i].fys,
          data: a[i].data.map(Number)
  
      }]
  });
  
  
  
              
    }
          }
          },
          fail: function() {
              alert("failed");
          }
      });
      
        setInterval(function() {
                 
                  var purl = '{{baseUrl}}';
	var xh = $.ajax({
			url:purl,
			method:'get',
			
		});
	xh.done(()=>{ window.location.reload();});
                }, 900000); 
                

function logOpen(){
	var purl = '{{baseUrl}}/log/dashboard';
	var xh = $.ajax({
			url:purl,
			method:'post',
			data:{orgid:'{{orgid}}'}
		});
	xh.done(()=>{/*logged*/});
}
logOpen();
setInterval(()=>{
	logOpen();
}, 1500000);
  
  
  </script>
  
  
        <!-- Demo styles -->

    </body>
</html>