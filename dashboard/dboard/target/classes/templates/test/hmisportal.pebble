
<!doctype html>
<html>
    <head>
        <meta charset="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="profile" href="https://gmpg.org/xfn/11">
		<title>PORTAL</title>
        <!-- Google Fonts CDN -->
        <!-- Google Fonts
        ============================================ -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Khand:wght@500;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Mukta:300,400,500,600,700,800,900" rel="stylesheet" />        
        
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
        <script src="https://use.fontawesome.com/93c3e6ff0e.js"></script>

        <!-- Bootstrap 4.6.1 CDN -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">  
        <!-- Owl Carousel 2.3.4 CDN -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g==" crossorigin="anonymous" referrerpolicy="no-referrer" />

        <!-- STYLESHEETS : begin -->
        <link rel="stylesheet" type="text/css" href="css/style.css">  
        <style type="text/css">
  .thiscard{
    max-height: 250px;
    height: 250px;
    overflow: auto;
  }
  
  .highcharts-title{
  	fill: #0062cc !important;
  }
  
  .highcharts-subtitle{
  	fill: #d53e4c !important;
  }
  .highcharts-legend-item{
  	fill: #6a34cd !important;
  }
</style>      
    </head>



    <body>
        <div class="hmis-section">
            <div class="container-fluid">
                <div class="row">

                    <div class="col-lg-3 col-sm-12">
                        <div class="company-info">
                            <img class="img-fluid" src="../Emblem_of_Nepal_2020.svg">
                            <h3>{{orgname}} </h3>
                        </div>
                    </div>

                    <div class="col-lg-9 col-sm-12">
                        <div class="row">

                            <div class="column5">
                                <div class="head-block1">
                                    <div class="icon">
                                        <img src="https://openweathermap.org/img/w/{{icon}}.png"">
                                    </div>
                                    <div class="info">
                                        <span class="spc1"> {{temp}} &deg;C </span> 
                                        <span class="spc2"> {{type}} ({{desc}}) </span>
                                    </div>
                                </div>
                            </div>

                            <div class="column5">
                                <div class="head-block1">            
                                    <div class="icon">
                                        <i class="fas fa-restroom"></i>
                                    </div>
                                    <div class="info">
                                        <span class="spc1"> {{census.get("population")}} </span>
                                        <span class="spc2">जनसंख्या</span>
                                    </div>
                                </div>
                            </div>   

                           <!--  <div class="column5">
                                <div class="head-block1">
                                    <div class="icon">
                                        <i class="fab fa-jedi-order"></i>
                                    </div>
                                    <div class="info">
                                        <span class="spc1"> {{ward}}</span>
                                        <span class="spc2">वडा संख्या </span>
                                    </div>
                                </div>
                            </div>       -->           

                            <div class="column5">
                                <div class="head-block1">
                                    <div class="icon">
                                        <i class="fa fa-hospital"></i>
                                    </div>
                                    <div class="info">
                                        <span class="spc1">{{hf}} </span>
                                        <span class="spc2"> स्वास्थ्य संस्था </span>
                                    </div>
                                </div>
                            </div>

                            <div class="column5">
                                <div class="head-block1">
                                    <div class="icon">
                                        <i class="fa fa-building"></i>
                                    </div>
                                    <div class="info">
                                        <span class="spc1">{{census.get("total_household")}} </span>
                                        <span class="spc2">घरधुरी </span>
                                    </div>
                                </div>
                            </div>                            

                        </div>
                    </div>

                </div>
            </div>
        </div><!-- Ends hmis-section -->



        <!-- Scroll Part Start -->
        <div class="marquee-section">
            <div class="container-fluid">
                <div class="row">
                    <div class="time-display">
                        <h4 id="time">Update</h4>
                    </div>
                    <div class="marquee-display">
                        <div class="marquee">
                         <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{update | raw }}</p> 
                        
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Ends marquee-section -->




        <div class="columns-section">
            <div class="container-fluid">
                <div class="row">

                    <div class="col-lg-6 col-sm-12">
                        <div class="card-body equalheight thiscard" style="max-height:400px !important; height: 400px !important;">
                            <h3><i class="fas fa-layer-group"></i> एकीकृत स्वास्थ्य सूचना व्यवस्थापन प्रणालीको संक्षिप्त परिचय</h3>
                            {{intro | raw}}
                           </div>
                    </div>

                 <!--   <div class="col-lg-6 col-sm-12">
                        <div class="card-body equalheight thiscard">
                            <h3><i class="fas fa-map-signs"></i> पालिकाको नक्शा </h3>
                            <img class="img-fluid" src="{{baseUrl}}/images/{{orgid}}.svg">
                        </div>
                    </div> -->


                </div>
            </div>
        </div><!-- Ends columns-section -->








        <!-- row 2 start -->
        <div class="columns-section">
            <div class="container-fluid">
                <div class="row">
                       <div id="cont" style="display:none"> </div>
                       <div id="s1" style="display:none"></div> 
                       <div id="s2" style="display:none"></div>   
                       <div id="s3" style="display:none"></div>   
                       <div id="dash1" style="display:none"></div> 
                       <div id="dash2" style="display:none"></div> 
                       <div id="dash3" style="display:none"></div> 
            <!--    <div class="col-lg-6 col-sm-12">
                        <div class="card-body equalheight">
                            <div id="cont"> </div>     
                        </div>
                    </div>
                    <div id="ss1" class="col-lg-6 col-sm-12">
                        <div class="card-body equalheight">
                            <div id="s1"></div>     
                        </div>
                    </div>
                
                <div id="ss2" class="col-lg-6 col-sm-12">
                        <div class="card-body equalheight">
                            <div id="s2"></div>     
                        </div>
                    </div>
                    <div id="ss3" class="col-lg-6 col-sm-12">
                        <div class="card-body equalheight">
                            <div id="s3"></div>     
                        </div>
                    </div>

                    <div id="dd1" class="col-lg-6 col-sm-12">
                        <div class="card-body equalheight">
                            <div id="dash1"></div>     
                        </div>
                    </div>
                    <div id="dd2" class="col-lg-6 col-sm-12">
                        <div class="card-body equalheight">
                            <div id="dash2"></div>     
                        </div>
                    </div>
                    
                    <div id="dd3" class="col-lg-6 col-sm-12">
                        <div class="card-body equalheight">
                            <div id="dash3"></div>     
                        </div>
                    </div> -->
                    
                    
                    {% for p in chart %}
                    	<div class="col-lg-6 col-sm-12">
                        <div class="card-body equalheight">
                            <div id="{{ p.get("indicator")}}"></div>     
                        </div>
                    </div>
                    {% endfor %}
                    
                     {% for p in fchart %}
                    	<div class="col-lg-6 col-sm-12">
                        <div class="card-body equalheight">
                            <div id="cc{{ p.get("id")}}""></div>     
                        </div>
                    </div>
                    {% endfor %}
                    
                     {% for p in dchart %}
                    	<div class="col-lg-6 col-sm-12">
                        <div class="card-body equalheight">
                            <div id="cc{{ p.get("id")}}""></div>     
                        </div>
                    </div>
                    {% endfor %}
                    
                     {% for i in image %}
                    <div class="col-lg-6 col-sm-12">
                        <div class="card-body equalheight2">
                            <h3><i class="fas fa-images"></i> {{i.get("title")}}</h3>
                            <img class="img-fluid" src="{{baseUrl}}/{{i.get("image")}}">   
                        </div>
                    </div>
                     {% endfor %}
                     
                      {% if video != "1" %}
						<div  class="col-md-12">
          <div class="card">
          <script>
          	function fullScreenVideo(){
				var mv = document.getElementById("myvideo");
				if (mv.requestFullscreen) {
			    mv.requestFullscreen();
			  } else if (mv.webkitRequestFullscreen) { /* Safari */
			    mv.webkitRequestFullscreen();
			  } else if (mv.msRequestFullscreen) { /* IE11 */
			    mv.msRequestFullscreen();
			  }
			}
          </script>
            <div class="card-body embed-responsive embed-responsive-16by9">
            	<video class="embed-responsive-item" id="myvideo"  autoplay="autoplay" controls muted>
				  <source src="{{baseUrl}}/{{video}}" type="video/mp4">
				  <source src="{{baseUrl}}/{{video}}" type="video/ogg">
				
				</video>
            </div>
          </div>
       </div>
					{% endif %}
                     
                     {% for i in acard %}
                    <div class="col-lg-6 col-sm-12">
                        <div class="card-body equalheight2">
                            <h3><i class="fas fa-info-square"></i> {{i.get("title")}}</h3>
                             {{i.get("content") | raw }}  
                        </div>
                    </div>
                     {% endfor %}
                     
                     
                     
                     
                    
                </div>
            </div>
        </div><!-- Ends columns-section -->

      <!--  <div class="columns-section">
            <div class="container-fluid">
                <div class="row">

                    <div class="col-lg-6 col-sm-12">
                        <div class="card-body equalheight">
                            <table class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th scope="col">वडा</th>
                                        <th scope="col">जनसंख्या</th>
                                        <th scope="col">क्षेत्रफल(वर्ग कि.मी.)</th>
                                    </tr>
                                </thead>

                                <tbody>  
                                     {% for i in basic %}
           <tr>
                <td>{{ i.get("ward")}}</td>
                <td>{{ i.get("population")}}</td>
                <td>{{ i.get("area_sqkm")}}</td>
				
		</tr> 
		 {% endfor %}   
                                </tbody>
                            </table>
                        </div> 
                    </div>


                    <div class="col-lg-6 col-sm-12">
                        <div class="card-body equalheight">
                            <table class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th scope="col">वडा</th>
                                        <th scope="col">कुल स्वास्थ्य संस्था</th>
                                        <th scope="col">सरकारी  स्वास्थ्य संस्था</th>
                                        <th scope="col">गैरसरकारी स्वास्थ्य संस्था </th>
                                        <th scope="col">नर्मल बेड </th>
                                        <th scope="col">आइ सि यु बेड </th>
                                        <th scope="col">भेन्टिलेटर बेड </th>
                                    </tr>
                                </thead>

                                <tbody>  
                                     {% for hf in hfcount %}
       
           <tr>
                
                <td>{{ hf.get("ward")}}</td>				
                <td>{{ hf.get("total")}}</td>
				<td>{{ hf.get("gov")}} </td>
				<td>{{ hf.get("ngov")}}</td>
				<td>{{ hf.get("normal")}}  </td>
				<td>{{ hf.get("icu")}}  </td>
				<td>{{ hf.get("vent")}} </td>
             
				
		</tr> 
		{% endfor %}     
                                </tbody>
                            </table>
                        </div> 
                    </div>


                </div>
            </div>
        </div> -->
        <!-- Ends columns-section -->



        <div class="map-section">            
            <div class="map-responsive">
                <iframe frameborder="0" height="550" width="1400" src="https://maps.google.com/?q={{lat}},{{longs}}&t=&z=15&ie=UTF8&iwloc=&output=embed&hl=np" style="border:0" width="250"></iframe>
            </div>
        </div><!-- Ends columns-section -->



        <div class="before-footer-section">
            <div class="container-fluid">
                <div class="row">

                    <div class="col-lg-6 col-sm-12">
                        <div class="cards">
                            <h3><i class="fas fa-bullhorn"></i> महत्वपूर्ण जानकारी</h3>
                            <div class="card-content">
                                  {{imp | raw}}
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 col-sm-12">
                        <div class="cards">
                            <h3><i class="fas fa-bullhorn"></i> सुझाव/जानकारी</h3>
                            <div class="card-content">
                                {{tips | raw}}
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div><!-- Ends before-footer-section -->




        <div class="main-footer-section">
            <div class="container-fluid">
                <div class="row">

                    <div class="col-lg-4 col-sm-12">
                        <div class="cards">
                            <h3><i class="fas fa-map-marked"></i> सम्पर्क विवरण</h3>
                            <div class="card-content">
                                {{contact | raw}}
                            </div>
                        </div>
                    </div>

               <!--     <div class="col-lg-8 col-sm-12">
                        <div class="cards">
                            <h3><i class="fas fa-map-marked"></i> वडाहरुको सम्पर्क विवरण</h3>
                            <div class="card-body equalheight">
                               
                                <div class="">
                                    <div>
                                       {{wc | raw}}
                                    </div>
                                  
                                   
                                </div>                                
                            </div>
                        </div>
                    </div> -->

                </div>
            </div>
        </div><!-- Ends main-footer-section -->



        <div class="footer-section">
            <div class="container-fluid">
                <div class="col-lg-12">
                    Copyrights © 2022 | All Rights Reserved. 
                </div>
            </div>
        </div>      


        <div class="scroll-top-wrapper">
            <span class="scroll-top-inner"><a href="#"><i class="fa fa-angle-double-up"></i></a></span>
        </div><!-- close .scroll-top-wrapper -->


        <script type="text/javascript" src="js/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://code.highcharts.com/highcharts.js"></script>
        <script src="https://code.highcharts.com/highcharts-3d.js"></script>
        <script src="https://code.highcharts.com/modules/exporting.js"></script>
        <script src="https://code.highcharts.com/modules/export-data.js"></script>
        <script src="https://code.highcharts.com/modules/accessibility.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
        <!-- Demo styles -->
        <script type="text/javascript" src="js/hmis.js"></script>
        
        

<script>

  
  Highcharts.setOptions({
    colors: ['#058DC7', '#50B432', '#ED561B', '#DDDF00', '#24CBE5', '#64E572', '#FF9655', '#FFF263', '#6AF9C4']
});
  
  
   var baseUrl="http://dashboard.hmis.gov.np";
 // var months=["Shrawn","Bhadra","Ashoj","Kartik","Mangsir","Poush","Magh","Falgun","Chaitra","Baishakh","Jestha","Ashar"];
  var months=["श्रावण ","भदौ","असोज ","कार्तिक","मंसिर ","पौष","माघ","फाल्गुण","चैत्र","वैशाख","ज्येष्ठ ","असार"];
  
  $.ajax({

        method: 'get',
       url: baseUrl+"/dashboard/getConfig?orgid="+{{orgid}}+"&cid=1&dt=1",
        success: function(response) {
           var a=response.data;
           if(a.length==0){
           	
           }
			for(var i in a){
			var m = [];
			var y = [];
			var d=[];
			
				 var f={"mindicator":[],"myear":[]};
    var inds = a[i].mindicator.split(",");
      for(var k of inds){
      m.push(k);
        f.mindicator.push(k);
      }
      var yrs = a[i].myear.split(",");
      for(var j of yrs){
     	y.push(parseInt(j));
        f.myear.push(parseInt(j));
      }
       d.push({
            mindicator: m, 
            myear:  y
        });
     var tabid="cc"+a[i].id;
      var ctype=a[i].charttype;
      getCharts(tabid,ctype,inds,yrs,d[0],"f");
     
				
			}
	

        },
        fail: function() {
            alert("failed");
        }
    });
    
     $.ajax({

        method: 'get',
       url: baseUrl+"/dashboard/getConfig?orgid="+{{orgid}}+"&cid=0&dt=1",
        success: function(response) {
           var a=response.data;
			for(var i in a){
			var m = [];
			var y = [];
			var d=[];
			
				 var f={"mindicator":[],"myear":[]};
    var inds = a[i].mindicator.split(",");
      for(var k of inds){
      m.push(k);
        f.mindicator.push(k);
      }
      var yrs = a[i].myear.split(",");
      for(var j of yrs){
     	y.push(parseInt(j));
        f.myear.push(parseInt(j));
      }
       d.push({
            mindicator: m, 
            myear:  y
        });
     var tabid="cc"+a[i].id;
      var ctype=a[i].charttype;
      getChartsHmis(tabid,ctype,inds,yrs,d[0],"h");
     
				
			}
	

        },
        fail: function() {
            alert("failed");
        }
    });
    
   function getCharts(tabid,ctype,inds,yrs,dat,type){
     $.ajax({
      
                method: "POST",
                url: baseUrl+"/dashboard/get-ind-data?orgid="+{{orgid}}+"&fcharttype="+ctype+"&type="+type+"&findicator="+inds+"&fyear="+yrs,
			    data: dat,
                success: function (resp) {
                if(typeof resp.data=="string"){
                     console.log(resp.data);
                  	 $("#"+tabid).html(resp.data);
                  	 
                   }else{
                    console.log(resp.data);
                    
         Highcharts.chart(tabid, {

    chart: {
          type: ctype
      },
      title: resp.data[0].title,
      subtitle: resp.data[0].subtitle,
      xAxis: {
          categories: resp.data[0].cats,
          crosshair: true
      },
      yAxis: {
          min: 0,
          title: {
              text: 'Nrs.'
          }
      },
      tooltip: {
          headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
          pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
              '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
          footerFormat: '</table>',
          shared: true,
          useHTML: true
      },
     plotOptions: {
        
          column: {
              pointPadding: 0.2,
              borderWidth: 0,
              dataLabels: {
                enabled: true
              },
          }
      },
    series: resp.data[0].series
});
                   
                   }
					

                },
                fail: function () {

                    alert("failed");
                }
            });
    	
    }
    
    function getChartsHmis(tabid,ctype,inds,yrs,dat,type){
     $.ajax({
      
                method: "POST",
                url: baseUrl+"/dashboard/get-ind-data?orgid="+{{orgid}}+"&charttype="+ctype+"&type="+type+"&mindicator="+inds+"&myear="+yrs,
			    data: dat,
                success: function (resp) {
                if(typeof resp.data=="string"){
                     console.log(resp.data);
                  	 $("#"+tabid).html(resp.data);
                  	 
                   }else{
                    console.log(resp.data);
                    
         Highcharts.chart(tabid, {

    chart: {
          type: ctype
      },
      title: resp.data[0].title,
      subtitle: resp.data[0].subtitle,
      xAxis: {
          categories: resp.data[0].cats,
          crosshair: true
      },
      yAxis: {
          min: 0,
          title: {
              text: 'Value'
          }
      },
      tooltip: {
          headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
          pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
              '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
          footerFormat: '</table>',
          shared: true,
          useHTML: true
      },
     plotOptions: {
        	series: {
            colorByPoint: true
        },
          column: {
              pointPadding: 0.2,
              borderWidth: 0,
              dataLabels: {
                enabled: true
              },
          }
      },
    series: resp.data[0].series
});
                   
                   }
					

                },
                fail: function () {

                    alert("failed");
                }
            });
    	
    }
  
   $.ajax({

        method: 'get',
       url: baseUrl+"/getDashboardSutra?orgid="+{{orgid}}+"&pid=100&repType=broad-sector&fy=2078",
        success: function(response) {
        	
        	if(response==""){
        		$("#ss1").hide();
           
        	}
          var a=JSON.parse(response);
         // console.log(a);
			var tbudget = 0;
			var texp = 0;
            var labels = [];
            var series = [{
                    name: "Budget",
                    data: []
                }, {
                    name: "Expenditure",
                    data: []
                }];
               // console.log(response);
                
                for (var i in a) {
                        labels.push(a[i].namenp);
                        series[0].data.push(a[i].totalbudget);
                        series[1].data.push(a[i].expenditure);
						tbudget += a[i].totalbudget;
						texp += a[i].expenditure;
                    }
               //     console.log(series);
	
	Highcharts.chart('s1', {

    chart: {
          type: 'column'
      },
      title: {
          text: ' Broad Sector Budget and Expenditure'
      },
      subtitle: {
          text: 'Source: Sutra'
      },
      xAxis: {
          categories: labels,
          crosshair: true
      },
      yAxis: {
          min: 0,
          title: {
              text: 'Nrs.'
          }
      },
      tooltip: {
          headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
          pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
              '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
          footerFormat: '</table>',
          shared: true,
          useHTML: true
      },
     plotOptions: {
        series: {
            colorByPoint: true
        },
          column: {
              pointPadding: 0.2,
              borderWidth: 0,
              dataLabels: {
                enabled: true
              },
          }
      },
    series: [{
          type:'column',
          name: series[0].name,
          data: series[0].data.slice(1).map(Number)
  
      }, {
          type:'column',
          name: series[1].name,
          data: series[1].data.slice(1).map(Number)
  
      }]
});
$(".highcharts-credits").html("Source: HMIS");
        },
        fail: function() {
            alert("failed");
        }
    });
    
    $.ajax({

        method: 'get',
       url: baseUrl+"/getDashboardSutra?orgid="+{{orgid}}+"&pid=101&repType=sector&fy=2078",
        success: function(response) {
        if(response==""){
        		$("#ss2").hide();
           
        	}
          var a=JSON.parse(response);
           console.log(a);
			var tbudget = 0;
			var texp = 0;
            var labels = [];
            var series = [{
                    name: "Budget",
                    data: []
                }, {
                    name: "Expenditure",
                    data: []
                }];
            //    console.log(response);
                
                for (var i in a) {
                        labels.push(a[i].namenp);
                        series[0].data.push(a[i].totalbudget);
                        series[1].data.push(a[i].expenditure);
						tbudget += a[i].totalbudget;
						texp += a[i].expenditure;
                    }
                  //  console.log(series);
	
	Highcharts.chart('s2', {

    chart: {
          type: 'column'
      },
      title: {
          text: 'Sectorial Budget & Expenditures'
      },
      subtitle: {
          text: 'Source: Sutra'
      },
      xAxis: {
          categories: labels,
          crosshair: true
      },
      yAxis: {
          min: 0,
          title: {
              text: 'Nrs.'
          }
      },
      tooltip: {
          headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
          pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
              '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
          footerFormat: '</table>',
          shared: true,
          useHTML: true
      },
      plotOptions: {
        series: {
            colorByPoint: true
        },
          column: {
              pointPadding: 0.2,
              borderWidth: 0,
              dataLabels: {
                enabled: true
              },
          }
      },

    series: [{
          type:'column',
           color: '#24cbe5',
          name: series[0].name,
          data: series[0].data.slice(1).map(Number)
  
      }, {
          type:'column',
           color: '#FF530D',
          name: series[1].name,
          data: series[1].data.slice(1).map(Number)
  
      }]
});
$(".highcharts-credits").html("Source: HMIS");
        },
        fail: function() {
            alert("failed");
        }
    });
   
   
   $.ajax({

        method: 'get',
       url: baseUrl+"/getDashboardSutra?orgid="+{{orgid}}+"&pid=102&repType=sectorial-activity&fy=2078",
        success: function(response) {
        if(response==""){
        $("#ss3").hide();
           
        	}
          var a=JSON.parse(response);
         // console.log(a);
			var tbudget = 0;
			var texp = 0;
            var labels = [];
            var series = [{
                    name: "Budget",
                    data: []
                }, {
                    name: "Expenditure",
                    data: []
                }];
               // console.log(response);
                
                for (var i in a) {
                        labels.push(a[i].namenp);
                        series[0].data.push(a[i].totalbudget);
                        series[1].data.push(a[i].expenditure);
						tbudget += a[i].totalbudget;
						texp += a[i].expenditure;
                    }
               //     console.log(series);
	
	Highcharts.chart('s3', {

    chart: {
          type: 'column'
      },
      title: {
          text: 'Sectorial Activity Budget & Expenditures'
      },
      subtitle: {
          text: 'Source: Sutra'
      },
      xAxis: {
          categories: labels,
          crosshair: true
      },
      yAxis: {
          min: 0,
          title: {
              text: 'Nrs.'
          }
      },
      tooltip: {
          headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
          pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
              '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
          footerFormat: '</table>',
          shared: true,
          useHTML: true
      },
      plotOptions: {
        
          column: {
              pointPadding: 0.2,
              borderWidth: 0,
              dataLabels: {
                enabled: true
              },
          }
      },
    series: [{
          type:'column',
           color: '#FF530D',
          name: series[0].name,
          data: series[0].data.slice(1).map(Number)
  
      }, {
          type:'column',
           color: '#24cbe5',
          name: series[1].name,
          data: series[1].data.slice(1).map(Number)
  
      }]
});
$(".highcharts-credits").html("Source: HMIS");
        },
        fail: function() {
            alert("failed");
        }
    });
  $.ajax({

        method: 'get',
       url: baseUrl+"/getDashboardCombine?orgid="+{{orgid}},
        success: function(response) {
           var a=response.data;
	var f=a[0];
	var m=a[1];
	
	Highcharts.chart('cont', {

    chart: {
        type: 'column'
    },

    title: {
        text: 'कुल नयाँ ओपीडी भ्रमण'+" "+ f.fys
    },

    xAxis: {
        categories: months
    },

    yAxis: {
        allowDecimals: false,
        min: 0,
        title: {
            text: 'Number of visit'
        }
    },

    tooltip: {
        formatter: function () {
            return '<b>' + this.x + '</b><br/>' +
                this.series.name + ': ' + this.y + '<br/>' +
                'Total: ' + this.point.stackTotal;
        }
    },

    plotOptions: {
        column: {
            stacking: 'normal'
        }
    },

    series: [{
        name: f.inamenp,
         color: '#24cbe5',
        data: f.data.map(Number),
        stack: 'male'
    }, {
        name: m.inamenp,
         color: '#a367dc',
        data: m.data.map(Number),
        stack: 'male'
    }]
});
$(".highcharts-credits").html("Source: HMIS");
        },
        fail: function() {
            alert("failed");
        }
    });
    
     $.ajax({

        method: 'get',
       url: baseUrl+"/getDashboardCombinePublic?orgid="+{{orgid}}+"&pid=1&tid=1",
        success: function(response) {
           var a=response.data;
           if(a.length==0){
           		$("#dd1").hide();
           }
	var f=a[0];
	var m=a[1];
	
	Highcharts.chart('dash1', {

    chart: {
        type: 'column'
    },

    title: {
        text: 'सुरक्षित मातृत्व कार्यक्रम - प्रसुति सेवा '+" "+ f.fys
    },

    xAxis: {
        categories: months
    },

    yAxis: {
        allowDecimals: false,
        min: 0,
        title: {
            text: 'Total number'
        }
    },

    legend: {
              align: 'right',
              x: -30,
              verticalAlign: 'top',
              y: 25,
              floating: true,
              backgroundColor: 'white',
              borderColor: '#CCC',
              borderWidth: 1,
              shadow: false
          },
          tooltip: {
              headerFormat: '<b>{point.x}</b><br/>',
              pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'
          },
          plotOptions: {
              column: {
                  stacking: 'normal',
                  dataLabels: {
                      enabled: true
                  }
              }
          },

    series: [{
        name: f.inamenp,
         color: '#24cbe5',
        data: f.data.map(Number),
        stack: 'male'
    }, {
        name: m.inamenp,
         color: '#a367dc',
        data: m.data.map(Number),
        stack: 'male'
    }]
});
$(".highcharts-credits").html("Source: HMIS");
        },
        fail: function() {
            alert("failed");
        }
    });
    
    
    
    $.ajax({

        method: 'get',
       url: baseUrl+"/getDashboardCombinePublic?orgid="+{{orgid}}+"&pid=1&tid=0",
        success: function(response) {
           var a=response.data;
           if(a.length==0){
           		$("#dd2").hide();
           }
	var f=a[0];
	var m=a[1];
	var s=a[2];
	
	Highcharts.chart('dash2', {

    chart: {
        type: 'column'
    },

    title: {
        text: 'सुरक्षित मातृत्व कार्यक्रम '+" "+ f.fys
    },

    xAxis: {
        categories: months
    },

    yAxis: {
        allowDecimals: false,
        min: 0,
        title: {
            text: 'Total number'
        }
    },

    legend: {
              align: 'right',
              x: -30,
              verticalAlign: 'top',
              y: 25,
              floating: true,
              backgroundColor: 'white',
              borderColor: '#CCC',
              borderWidth: 1,
              shadow: false
          },
          tooltip: {
              headerFormat: '<b>{point.x}</b><br/>',
              pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'
          },
          plotOptions: {
              column: {
              	 colors: ['#FF530D', '#E82C0C', '#FF0000', '#E80C7A', '#E80C7A'],
                  stacking: 'normal',
                  dataLabels: {
                      enabled: true
                  }
              }
          },

    series: [{
        name: f.inamenp,
         color: '#24cbe5',
        data: f.data.map(Number),
        stack: 'male'
    }, {
        name: m.inamenp,
         color: '#FF530D',
        data: m.data.map(Number),
        stack: 'male'
    },{
        name: s.inamenp,
         color: '#a367dca367dc',
        data: s.data.map(Number),
        stack: 'male'
    }]
});
$(".highcharts-credits").html("Source: HMIS");
        },
        fail: function() {
            alert("failed");
        }
    });

	$.ajax({

        method: 'get',
       url: baseUrl+"/getDashboardCombinePublic?orgid="+{{orgid}}+"&pid=3&tid=0",
        success: function(response) {
           var a=response.data;
           if(a.length==0){
           		$("#dd3").hide();
           }
	var f=a[0];
	var m=a[1];
	var s=a[2];
	
	Highcharts.chart('dash3', {

    chart: {
        type: 'column'
    },

    title: {
        text: 'पोषण कार्यक्रम '+" "+ f.fys
    },

    xAxis: {
        categories: months
    },

    yAxis: {
        allowDecimals: false,
        min: 0,
        title: {
            text: 'Total number'
        }
    },

    legend: {
              align: 'right',
              x: -30,
              verticalAlign: 'top',
              y: 25,
              floating: true,
              backgroundColor: 'white',
              borderColor: '#CCC',
              borderWidth: 1,
              shadow: false
          },
          tooltip: {
              headerFormat: '<b>{point.x}</b><br/>',
              pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'
          },
          plotOptions: {
              column: {
                  stacking: 'normal',
                  dataLabels: {
                      enabled: true
                  }
              }
          },

    series: [{
        name: f.inamenp,
         color: '#24cbe5',
        data: f.data.map(Number),
        stack: 'male'
    }, {
        name: m.inamenp,
         color: '#FF530D',
        data: m.data.map(Number),
        stack: 'male'
    },{
        name: s.inamenp,
         color: '#a367dc',
        data: s.data.map(Number),
        stack: 'male'
    }]
});
$(".highcharts-credits").html("Source: HMIS");
        },
        fail: function() {
            alert("failed");
        }
    });
    
   
    
    
   $.ajax({

        method: 'get',
        url: baseUrl+"/getDashboard?orgid="+{{orgid}},
        success: function(response) {
         var a=response.data;
         var htm="";
		for(var i in a){
		 htm+="<div id='"+a[i].indicator+"'></div>";
		
		// $("#slideshow").html(htm);
			console.log(a[i].fys);
			if(a[i].chart_type=="Line Chart"){
			
			Highcharts.chart(a[i].indicator, {
    chart: {
        type: 'line'
       
    },
    title: {
        text: a[i].inamenp
    },
    subtitle: {
        text: a[i].inameen
    },
    xAxis: {
        categories: months,
        crosshair: true
    },
    yAxis: {
        title: {
            text: 'Value'
        }
    },
    plotOptions: {
        line: {
            dataLabels: {
                enabled: true
            },
            enableMouseTracking: false
        }
    },
    series: [{
        name:a[i].inamenp +" "+ a[i].fys,
        data: a[i].data.map(Number)
    }]
});
			}
			
			if(a[i].chart_type=="Pie Chart"){
			var ind=a[i].indicator;
			var nam=a[i].inamenp;
			var series = [{
                    name: "Total",
                    data: []
                }];
			var piedata=a[i].data.map(Number);
			for(var p in piedata){
				var pies = {name:months[p],y:piedata[p]};
				
				series[0].data.push(pies);
			}
			
			Highcharts.chart(ind, {
    chart: {
       type: 'pie',
        options3d: {
            enabled: true,
            alpha: 45,
            beta: 0
        }
    },
    title: {
        text: nam
    },
    subtitle: {
        text: a[i].inameen+"("+a[i].fys+")"
    },
    tooltip: {
        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
    },
    accessibility: {
        point: {
            valueSuffix: '%'
        }
    },
    plotOptions: {
        pie: {
            allowPointSelect: true,
            cursor: 'pointer',
             depth: 35,
            dataLabels: {
                enabled: true,
                format: '<b>{point.name}</b>: {point.percentage:.1f} %'
            }
        }
    },
    series: series
});
			
			}
			
			
			if(a[i].chart_type=="Bar Chart"){
			
			Highcharts.chart(a[i].indicator, {
    chart: {
        type: 'column',
        options3d: {
            enabled: true,
            alpha: 0,
            beta: 0,
            depth: 70
        }
        
    },
    title: {
        text: a[i].inamenp
    },
    subtitle: {
        text: a[i].inameen
    },
    xAxis: {
        categories: months,
        crosshair: true,
        labels: {
            skew3d: true,
            style: {
                fontSize: '16px'
            }
        }
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Value'
        }
    },
    tooltip: {
        headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
            '<td style="padding:0"><b>{point.y:.1f} </b></td></tr>',
        footerFormat: '</table>',
        shared: true,
        useHTML: true
    },
   plotOptions: {
                                    line: {
                                      dataLabels: {
                                        enabled: true
                                      },
                                      enableMouseTracking: true
                                    },
                                    column: {
                                    color: '#FF530D',
                                     depth: 50,
                                      dataLabels: {
                                        enabled: true
                                      },
                                      enableMouseTracking: true
                                    },
                                    bar: {
                                      dataLabels: {
                                        enabled: true
                                      },
                                      enableMouseTracking: true
                                    },
                                    areaspline: {
                                      dataLabels: {
                                        enabled: true
                                      },
                                      enableMouseTracking: true
                                    }

                                  },
    series: [{
        name: a[i].inamenp +" "+ a[i].fys,
        data: a[i].data.map(Number)

    }]
});
var src='<span class="source">Source: <a target="_blank" href="http://hmis.gov.np/hmis">HMIS</a></span>';
 $(".highcharts-credits").html("Source: HMIS");
  }}},
        fail: function() {
            alert("failed");
        }
    });
    
    function logVisit(){
	var purl = '{{baseUrl}}/log/portal';
	var xh = $.ajax({
			url:purl,
			method:'post',
			data:{orgid:'{{orgid}}'}
		});
	xh.done(()=>{/*logged done*/});
}
logVisit();
</script>

<script>
function getWardDetails(palika,ward){
	$("#wno").html(ward);
	$.get('{{baseUrl}}/getwarddetails?llgid='+palika+"&ward="+ward,(data)=>{
		$("#wcontent").html(data);
		$("#wardDetails").modal('show');
	});
}
</script>

    </body>
</html>